<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>使用状态模式和状态机进行红绿灯演示</title>
  </head>
  <body>
    <div id="lightText"></div>
    <script>
  // 初始化红绿灯状态  
  let state = 'red';  
  
  // 定义红绿灯状态切换的函数  
  function trafficLight() {  
      if (state === 'red') {  
          console.log('红灯亮，车辆停止')
          // 假设绿灯持续 5 秒  
          setTimeout(function() {  
              state = 'green'
              trafficLight() 
          }, 5000)
      } else if (state === 'green') {  
          console.log('绿灯亮，车辆通行')
          // 假设黄灯持续 2 秒  
          setTimeout(function() { 
              state = 'yellow' 
              trafficLight()
          }, 2000)
      } else if (state === 'yellow') {  
          console.log('黄灯亮，车辆准备')
          // 假设红灯再次亮起需要等待一段时间，例如 3 秒  
          setTimeout(function() {  
              state = 'red'
              trafficLight()
          }, 3000)
      }  
  }  
    
  // 启动红绿灯状态切换  
  trafficLight()
    </script>
  </body>
</html>